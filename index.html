<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Map Game</title>
</head>

<body>

<script>

function Army() {
  this.infantry = [];
  this.cavalry = [];
  this.artillery = [];
  this.officers = [];
  this.strategic_map_x = 0;
  this.strategic_map_y = 0;
}

function Fleet() {
  this.cruisers = [];
  this.battleships = [];
  this.transports = [];
  this.officers = [];
  this.strategic_map_x = 0;
  this.strategic_map_y = 0;
}

function Officer() { //spies are officers. Can't see what's happening on the map without somebody there. 
  this.experience = 0;
  this.money = 0;
  this.fame = 0;
  this.infamy = 0;
  this.tactical_map_x = 0;
  this.tactical_map_y = 0;
  this.special_ability = null;
}

function Player() {
  this.fame = 0;
  this.infamy = 0;
  this.officers = 0;
}

function CombatUnit() { //a ship, a cavalry company, a battalion of infantry, etc
  this.type = 0;
  this.experience = 0;
  this.morale = 1;
  this.max_hp = 1;
  this.hp = this.max_hp;
  this.tactical_map_x = 0;
  this.tactical_map_y = 0;
}

function Map(width, height) { //
  this.tiles = [];
  for(var w=0; w<width; w++) {
    this.tiles.push([]);
    for(var h=0; h<height; h++)
      this.tiles[w].append(new StrategicMapTile);
  }
  this.clicked = null; //a tile
}

function StrategicMap() {}
function TacticalMap() {}
StrategicMap.prototype = new Map();
TacticalMap.prototype = new Map();
StrategicMap.prototype.onclick = function(m) {
  
};
TacticalMap.prototype.onclick = function(m) {
  
};

function StrategicMapTile() { //fort, tavern, dock, stable, town? house?
  this.elevation = 0;
  this.x = 0; this.y = 0;
}

function TacticalMapTile() { //if needed
  this.elevation = 0;
  this.x = 0; this.y = 0;
}

function Move() {
  this.start_x = 0;
  this.start_y = 0;
  this.end_x = 0;
  this.end_y = 0;
}

function Turn() {
  this.moves = [];
}

function Game(n_players) {
  this.strategic_map = new StrategicMap();
  this.players = [];
  for(var i=0; i<n_players; i++)
    this.players.push( new Player() );
  this.current_player_number = 0;
  this.current_player = this.players[this.current_player_number];
  this.turn_history = [];
  this.strategic_mode = 0;
  this.tactical_mode = 1;
  this.mode = this.strategic_mode;
  this.strategic_map = new StrategicMap();
  this.tactical_map = null;
  
  this.turn_number = 0;
  
  this.new_turn = function() {
    this.turn_number++;
    this.current_player_number++;
    if(this.current_player_number>=this.players.length) {
      this.current_player_number = 0;
    }
    this.current_player = this.players[this.current_player_number];
  }
}

var game = new Game(2);

</script>

</body>

</html>
